job:
  name: simple_test_job
  desc: Simple test job for DataPY validation with control edges
  version: 1.0.0
  team: data-engineering
  owner: test@company.com
  created: "2025-01-15"

job_config:
  retries: 1
  timeout: 300
  fail_strategy: halt
  execution_mode: pandas

components:
  - name: start_component
    type: test_echo
    params:
      message: "Starting test job"
      row_count: 3
      delay_seconds: 1

  - name: process_component
    type: test_echo
    params:
      message: "Processing data from {{start_component__message}}"
      row_count: 5
      delay_seconds: 2

  - name: audit_logger
    type: test_echo
    params:
      message: "Audit: Job started at timestamp"
      row_count: 1
      delay_seconds: 1

  - name: end_component
    type: test_echo
    params:
      message: "Job completed successfully"
      row_count: 1
      delay_seconds: 1

  - name: error_handler
    type: test_echo
    params:
      message: "Error occurred in job"
      row_count: 1
      delay_seconds: 1

connections:
  data:
    - "start_component.main -> process_component.main"
    - "process_component.main -> end_component.main"

  control:
    # Parallel audit logging - creates subjob boundary
    - "start_component (ok) audit_logger"
    
    # Error handling - creates another subjob boundary  
    - "process_component (error) error_handler"