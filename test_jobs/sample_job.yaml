job:
  name: simple_test_job
  desc: Simple linear job to test basic build functionality
  version: 1.0.0
  team: data-engineering
  owner: test@company.com
  created: "2025-07-09"

job_config:
  retries: 1
  timeout: 600
  fail_strategy: halt
  dask_config:
    memory_limit: "1GB"
    parallelism: 2
    use_cluster: false

components:
  - name: start_job
    type: logging
    params:
      message: "Starting job in {{context.environment}} environment"
      level: "INFO"
      delay_seconds: 1

  - name: process_data
    type: logging
    params:
      message: "Processing data - found {row_count} records"
      level: "INFO"
      delay_seconds: 2

  - name: finish_job
    type: logging
    params:
      message: "Job completed at {timestamp}"
      level: "INFO"

  - name: handle_error
    type: logging
    params:
      message: "Error occurred - cleaning up"
      level: "ERROR"

connections:
  data:
    - "start_job.main -> process_data.main"
    - "process_data.main -> finish_job.main"

  control:
    - "start_job (error) handle_error"
    - "process_data (error) handle_error"